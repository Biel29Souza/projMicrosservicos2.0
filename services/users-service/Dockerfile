FROM node:20-alpine
WORKDIR /app

COPY services/users-service/package.json ./package.json
RUN npm install

COPY services/users-service/src ./src
COPY services/users-service/prisma ./prisma
COPY services/users-service/.env .env  
# ✅ esta linha é essencial

COPY common ./common

RUN npx prisma generate

ENV PORT=3001
EXPOSE 3001
CMD ["npm", "start"]
